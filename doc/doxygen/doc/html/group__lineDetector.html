<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>assistive-rehab: lineDetector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">assistive-rehab
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">lineDetector</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module takes as input the RGB image containing two lines composed of a set of ArUco markers and publishes the estimated pose of the markers with respect to the robot camera and root.  
</p>
<p>This module takes as input the RGB image containing two lines composed of a set of ArUco markers and publishes the estimated pose of the markers with respect to the robot camera and root. </p>
<p>Version:0.6.0 </p><dl class="section author"><dt>Author</dt><dd>Valentina Vasco <a href="#" onclick="location.href='mai'+'lto:'+'val'+'en'+'tin'+'a.'+'vas'+'co'+'@ii'+'t.'+'it'; return false;">valen<span style="display: none;">.nosp@m.</span>tina<span style="display: none;">.nosp@m.</span>.vasc<span style="display: none;">.nosp@m.</span>o@ii<span style="display: none;">.nosp@m.</span>t.it</a> <br  />
 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Released under the terms of the BSD 3-Clause License. </dd></dl>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>This module takes as input the RGB image containing two lines composed of a set of markers and publishes the estimated poses of the markers with respect to the camera and to robot root. It makes use of an OpenCV ArUco Board of 6x1 markers. The used boards can be found in <code>modules/lineDetector/app/conf</code> (the two images were sticked togheter for printing a marker big enough to be visible from a certain distance). Gazebo models of the ArUco Boards can be found in <code>app/gazebo/tug</code> (note that the variable <code>GAZEBO_MODEL_PATH</code> has to point to this folder). The start-line is used as world frame for the TUG app, with <code>x</code> pointing along the side of the line, <code>y</code> pointing backward and <code>z</code> upward. The detected start and finish lines are published into the objectsPropertiesCollector, with the pose estimated with respect to the world frame (<code>pose_world</code>), and the size of the line, as following:</p>
<div class="fragment"><div class="line">((finish-line ((pose_world (x y z ax ay az theta)) (size (width height)))) (<span class="keywordtype">id</span> opc_id))</div>
</div><!-- fragment --><h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<ul>
<li>&ndash;name: The module's name; all the open ports will be tagged with the prefix /name.</li>
<li>&ndash;period: Periodicity of the module.</li>
<li>&ndash;nlines: Number of lines handled.</li>
<li>&ndash;line-filter-order: Order of the median filter applied to the estimated lines poses.</li>
<li>&ndash;nx: Vector containing the number of markers along X direction, for the start and the finish line respectively.</li>
<li>&ndash;ny: Vector containing the number of markers along Y direction, for the start and the finish line respectively.</li>
<li>&ndash;marker-size: Vector containing the marker's length, for the start and the finish line respectively [m].</li>
<li>&ndash;marker-dist: Vector containing the distance between markers, for the start and the finish line respectively [m].</li>
<li>&ndash;simulation: If true, lines poses are obtained directly from the gazebo world scenario.</li>
<li>&ndash;use-initial-guess: If true, it uses the previously estimated pose of the line as a guess for the estimation of the current line</li>
<li>&ndash;camera::intrinsics: Camera's intrinsics if specified from file.</li>
<li>&ndash;camera::remote: Camera's remote to connect to </li>
</ul>
<h1><a class="anchor" id="inputports_sec"></a>
Input Ports</h1>
<ul>
<li>/lineDetector/img:i [ImageOfPixelRgb] [default carrier:]: Receives the RGB image.</li>
<li>/lineDetector/gaze/state:i [Property] [default carrier:]: Retrieves the current pose of the camera.</li>
</ul>
<h1><a class="anchor" id="outputports_sec"></a>
Output Ports</h1>
<ul>
<li>/lineDetector/img:o [ImageOfPixelRgb] [default carrier:]: Streams out the input image with detected axes.</li>
<li>/lineDetector/cam:rpc [rpc] [default carrier:]: Retrieves intrinsics from the camera.</li>
<li>/lineDetector/opc:rpc [rpc] [default carrier:]: Adds the start and the finish line to objectsPropertiesCollector.</li>
<li>/lineDetector/nav:rpc [rpc] [default carrier:]: Retrieves the current pose of the base.</li>
<li>/lineDetector/viewer:rpc [rpc] [default carrier:]: Sends commands to <a class="el" href="group__skeletonViewer.html">skeletonViewer</a> to draw the lines.</li>
<li>/lineDetector/gazebo:rpc [rpc] [default carrier:]: Sends command to gazebo plugin tuginterface, if simulation is set to true.</li>
</ul>
<h1><a class="anchor" id="services_sec"></a>
Services</h1>
<ul>
<li>/lineDetector/cmd:rpc [rpc-server]: service port . This service is described in <a class="el" href="classlineDetector__IDL.html" title="lineDetector_IDL IDL Interface to lineDetector services.">lineDetector_IDL</a> (idl.thrift) </li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
