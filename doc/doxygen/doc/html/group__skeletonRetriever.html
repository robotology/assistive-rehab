<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>assistive-rehab: skeletonRetriever</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">assistive-rehab
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">skeletonRetriever</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module merges 2D skeleton data with the depth information.  
</p>
<p>This module merges 2D skeleton data with the depth information. </p>
<p>Version:0.6.0 </p><dl class="section author"><dt>Author</dt><dd>Ugo Pattacini <a href="#" onclick="location.href='mai'+'lto:'+'ugo'+'.p'+'att'+'ac'+'ini'+'@i'+'it.'+'it'; return false;">ugo.p<span style="display: none;">.nosp@m.</span>atta<span style="display: none;">.nosp@m.</span>cini@<span style="display: none;">.nosp@m.</span>iit.<span style="display: none;">.nosp@m.</span>it</a> <br  />
 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Released under the terms of the BSD 3-Clause License. </dd></dl>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>This module merges 2D skeleton data as acquired by yarpOpenPose along with the depth information provided by the camera. The module communicates with the camera to retrieve its field of view. Given the keypoint depth and the camera's focal length, 3D camera coordinates of the keypoints can be computed. The module can be also run offline (no real camera is available) by specifying the camera's FOV, using the command camera::fov (54 42) (adjust the FOV according to the camera you want to simulate). Erosion is applied to the depth map (true by default, can be disabled using the command depth::enable false). Median filtering is applied to the keypoints in order to make the acquisition more robust. Optimization is applied to the skeleton such that the length of the limbs is equal to that observed during an initial phase (true by default, can be disabled using the command filtering::optimize-limblength false). It makes use of ipopt library.</p>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<ul>
<li>&ndash;general::period: Periodicity of the module (s).</li>
<li>&ndash;skeleton::keys-recognition-confidence: Keypoints whose confidence is lower than this threshold are discarded.</li>
<li>&ndash;skeleton::keys-recognition-percentage: Minimum percentage of keypoints to consider a skeleton valid.</li>
<li>&ndash;skeleton::keys-acceptable-misses: Number of consecutive times a keypoint can get lost before it becomes stale.</li>
<li>&ndash;skeleton::min-acceptable-path: Minimum acceptable max path to consider a skeleton valid.</li>
<li>&ndash;skeleton::tracking-threshold: Maximum distance a skeleton can move before erasing it.</li>
<li>&ndash;skeleton::time-to-live: Life span of a skeleton.</li>
<li>&ndash;depth::enable: Enable depth filtering.</li>
<li>&ndash;depth::kernel-size: Size of the applied kernel.</li>
<li>&ndash;depth::iterations: Number of times erosion is applied.</li>
<li>&ndash;depth::min-distance: Threshold on the minimum distance (m).</li>
<li>&ndash;depth::max-distance: Threshold on the maximum distance (m).</li>
<li>&ndash;filtering::filter-keypoint-order: Order of the median filter applied to keypoints' position.</li>
<li>&ndash;filtering::filter-limblength-order: Order of the filter for optimizing limbs' lengths.</li>
<li>&ndash;filtering::optimize-limblength: Enable optimization of limbs' lengths.</li>
<li>&ndash;camera::fov: Camera's field of view.</li>
<li>&ndash;camera::remote: Camera's remote to connect to </li>
</ul>
<h1><a class="anchor" id="inputports_sec"></a>
Input Ports</h1>
<ul>
<li>/skeletonRetriever/skeletons:i [Bottle] [default carrier:]: Receives 2D skeletons from yarpOpenPose.</li>
<li>/skeletonRetriever/depth:i [ImageOfPixelFloat] [default carrier:]: Receives stream of camera depth images.</li>
<li>/skeletonRetriever/nav:i [Property] [default carrier:]: Receives the navigation status broadcast.</li>
<li>/skeletonRetriever/gaze:i [Property] [default carrier:]: Receives the gaze status broadcast.</li>
</ul>
<h1><a class="anchor" id="outputports_sec"></a>
Output Ports</h1>
<ul>
<li>/skeletonRetriever/opc:rpc [rpc] [default carrier:]: Sends commands to objectsPropertiesCollector to add 3D skeletons to the database.</li>
<li>/skeletonRetriever/cam:rpc [rpc] [default carrier:]: Sends commands to the depth sensor to retrieve camera's field of view.</li>
<li>/skeletonRetriever/viewer:o [Bottle] [default carrier:]: Outputs 3D skeletons to send to <a class="el" href="group__skeletonViewer.html">skeletonViewer</a> for visualization.</li>
</ul>
<h1><a class="anchor" id="services_sec"></a>
Services</h1>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
